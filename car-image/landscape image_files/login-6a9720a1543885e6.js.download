(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{83236:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(24375)}])},24375:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var n=t(85893),o=t(67294),i=t(11163),r=t(41664),l=t.n(r),a=t(87536),c=t(86426),d=t(56312),m=t(29033),p=t(90617),x=t(23123),u=t(54041),h=t(10370),g=t(14849);function f(){var e,s;let t=(0,i.useRouter)(),{control:r,register:f,handleSubmit:w,setValue:j,getValues:b,formState:{errors:v,isValid:N}}=(0,a.cI)({resolver:(0,d.F)(p.dm)}),_=e=>t.push(e?"/dealer":"/my-account"),y=e=>(0,m.sv)(e,_),I=e=>S(e),C=(0,c.Nq)({onSuccess:e=>(0,m.Av)("google",e,I,y),flow:"implicit"}),[k,S]=(0,o.useState)(""),[E,R]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=x.Z.getItem("mph_loginCredentials")||{};(null==e?void 0:e.identifier)&&(j("isRemember",!0),j("email",(null==e?void 0:e.identifier)||""),j("password",(null==e?void 0:e.password)||""))},[]),(0,o.useEffect)(()=>{"apple"===t.query.from&&t.query.code&&(0,m.Av)("apple",t.query,I,y)},[t.query]);let P=e=>{e.target.checked||x.Z.removeItem("mph_loginCredentials")},Z=e=>{R(!0),S(""),fetch("/api/v1/auth/login",{method:"POST",body:JSON.stringify({identifier:e.email,password:e.password}),headers:{"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(s){R(!1),(null==s?void 0:s.message)&&S(s.message),(null==s?void 0:s.jwt)&&(e.isRemember&&x.Z.setItem("mph_loginCredentials",{identifier:e.email,password:e.password}),(0,m.sv)(null==s?void 0:s.jwt,_))}).catch(e=>{S(""),R(!1)})};return(0,n.jsx)(h.Zn,{children:(0,n.jsx)("section",{className:"pt-12 md:pt-12 grid place-content-center  min-h-screen bg-secondary-300",children:(0,n.jsxs)("div",{className:"mb-6 grid gap-[45px] place-content-center",children:[(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)("img",{className:"mx-auto w-[126px] h-[59px] object-contain",src:"/img/logo/mph_logo_black_512.png",alt:"MPH Logo"})}),(0,n.jsxs)("form",{onSubmit:w(Z),className:"px-[26px] py-[24px] bg-white flex gap-[15px] flex-col rounded-sm w-full",children:[(0,n.jsx)("h1",{className:" font-stix text-size-xl font-bold text-center",children:"Log In"}),(0,n.jsx)(u.II,{type:"email",placeholder:"Email",className:"w-[300px] sm:w-[336px] md:w-[400px]",inputClass:"pr-[13px]",...f("email"),error:null===(e=v.email)||void 0===e?void 0:e.message}),(0,n.jsx)(u.II,{type:"password",placeholder:"Password",className:"w-[300px] sm:w-[336px] md:w-[400px]",inputClass:"pr-[13px]",...f("password"),error:null===(s=v.password)||void 0===s?void 0:s.message,hideIcon:!0}),(0,n.jsx)(u.XZ,{defaultChecked:b("isRemember"),label:"Remember me",...f("isRemember"),onChange:P}),k&&(0,n.jsx)("p",{className:"text-message-100 font-medium max-w-[400px]",children:k}),(0,n.jsx)(u.zx,{type:"submit",className:"h-[44px] !text-[13px] !font-bold",disabled:E,children:E?(0,n.jsx)(u.$j,{size:4}):"Log In"}),(0,n.jsxs)(u.zx,{className:"h-[44px] !text-[13px] !font-bold",onClick:()=>C(),children:[(0,n.jsx)("img",{className:"w-[24px]",src:"/img/google.png",alt:"google"}),"Sign in with Google"]}),(0,n.jsx)("div",{className:"bg-black cursor-pointer text-center rounded-[4px] md:pl-4 h-[44px] pt-1 md:pt-0",children:(0,n.jsx)(g.Z,{designProp:{width:375,height:44,border:!0,border_radius:4},clientId:"".concat("web.mph.com"),redirectURI:"".concat("https://mph.com","/login?from=apple")})}),(0,n.jsx)(l(),{href:"/forgot",className:"font-light text-secondary-200 text-center hover:text-main transition-default",children:"Forgot your password?"}),(0,n.jsxs)("p",{className:"text-center mt-[13px] font-normal",children:["Don't have an account?"," ",(0,n.jsx)(l(),{href:"/register",className:"text-main font-medium",children:"Sign Up"})]})]})]})})})}t(83454)},42480:function(){}},function(e){e.O(0,[2013,1778,5445,9285,260,3874,4617,9866,1057,3609,6556,322,5675,5503,5315,4041,9774,2888,179],function(){return e(e.s=83236)}),_N_E=e.O()}]);