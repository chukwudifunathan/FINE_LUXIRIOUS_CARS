(function(){function it(){n=_ge("sb_form_q");e=_ge("b_header");o=_ge("sb_toolbar");s=_ge("sb_chcounter_r");t=_ge("sb_expand_r");i=_ge("sb_collapes_r");y=_qs(".qfc");p=_qs(".qfc.b_searchbox .ghost");c=_qs(".qfc.b_searchbox .nudge");l=_qs(".qfc.b_searchbox .user-prefix");h=_ge("sb_search_undo_redo_tip");n&&(k||ft(),d||rt())}function ft(){k=!0;sj_be(n,"change",a);sj_be(n,"cut",r);sj_be(n,"paste",st);sj_be(n,"focus",r);sj_be(n,"input",r);sj_be(n,"keydown",r);sj_be(n,"touchstart",r);sj_be(n,"click",r);w>=0&&(sj_be(n,"focus",v),sj_be(n,"input",v),sj_be(n,"keydown",et));t&&sj_be(t,"click",lt);i&&sj_be(i,"click",at)}function rt(){d=!0;sj_evt.bind("clearCompleted",ot);w>=0&&sj_evt.bind("clearCompleted",v);sj_evt.bind("AS.Input.Update",ct)}function a(){var f=parseInt(n.getAttribute("data-min-rows"))|0,t,i,r,u;n.setAttribute("rows",f+"");i=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-top").split("px")[0])||10;r=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-bottom").split("px")[0])||10;tt?(u=y?y.scrollHeight:n.scrollHeight,t=Math.max(1,Math.ceil((u-i-r)/g))):t=Math.max(1,Math.ceil((n.scrollHeight-i-r)/g));sj_evt.fire("SB.LineChange",{total_line:t});t>=2&&Log&&Log.Log&&Log.Log("MTL","Rows",t.toString(),!1);n.setAttribute("rows",t+"")}function r(){sb_st(a,0);ut&&b&&(ht(),b=!1)}function et(){sb_st(v,0)}function ot(){n.setAttribute("rows","1")}function st(){sb_st(function(){n.value=n.value.replace(/[\r\n]+/g," ");a()},0)}function ht(){_w.performance&&_w.performance.mark&&performance.mark("SerpSB");var n=performance.getEntriesByName("SerpSB");n&&n[0]&&n[0].startTime&&Log&&Log.Log&&Log.Log("SerpSB","AS","PerfInst",!1,"LoadTime",n[0].startTime.toString())}function ct(t){var i;(p&&c||h)&&(l.innerText=n.value,p.innerText=t[1].suggestion?t[1].suggestion:"",t[1].suggestion?(c.classList.add("nudgeVisible"),l.ariaLabel="".concat(Mtl_Config.suggestionText).concat(n.value).concat(t[1].suggestion).concat(Mtl_Config.tabText)):(c.classList.remove("nudgeVisible"),l.ariaLabel=""),h&&(((i=t[1])===null||i===void 0?void 0:i.suggestion)?h.classList.add("tip-visible"):h.classList.remove("tip-visible")),tt&&a())}function v(){var t,r=(t=n===null||n===void 0?void 0:n.getAttribute("maxlength"))!==null&&t!==void 0?t:"1000",i=n===null||n===void 0?void 0:n.value.length;s&&(s.innerText=i+"/"+r,i>=nt&&Log&&Log.Log&&Log.Log("MTL","CharCount",nt.toString(),!1),i>=w?(f(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&f(o,"b_hide")):(u(s,"b_hide"),o&&Mtl_Config&&Mtl_Config.hideToolbar&&u(o,"b_hide")))}function lt(n){sj_pd(n);sj_sp(n);e&&(u(e,"b_expanded"),t&&u(t,"b_hide"),i&&f(i,"b_hide"))}function at(n){sj_pd(n);sj_sp(n);e&&(f(e,"b_expanded"),t&&f(t,"b_hide"),i&&u(i,"b_hide"))}function vt(){b=!0;d=!1;_w._isPersistSBF||(k=!1)}var u=Lib.CssClass.add,f=Lib.CssClass.remove,yt=Lib.CssClass.contains,n,e,o,s,t,i,y,p,c,l,g=24,nt=50,w=Mtl_Config&&typeof(Mtl_Config.showCharCountAfter=="number")?Mtl_Config.showCharCountAfter:0,tt=Mtl_Config&&typeof(Mtl_Config.resizeWithGhosting=="boolean")?Mtl_Config.resizeWithGhosting:!1,ut=Mtl_Config&&typeof(Mtl_Config.logSearchBoxClickTime=="boolean")?Mtl_Config.logSearchBoxClickTime:!1,b=!0,k=!1,d=!1,h;it();sj_evt.bind("ajax.load",it);sj_evt.bind("ajax.unload",vt);sj_evt.bind("ajax.autosearch",rt)})()